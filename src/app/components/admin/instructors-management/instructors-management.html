<div class="container-fluid p-0">
    <div class="px-4 py-4">
    <!-- Header Section -->
    <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-3">
        <h2 class="fw-bold m-0">Instructors Management</h2>

        <div class="d-flex gap-3 align-items-center flex-grow-1 justify-content-end">
            <!-- Search Bar -->
            <div class="position-relative" style="max-width: 300px; width: 100%;">
                <input type="text" class="form-control ps-4 rounded-pill border-0 shadow-sm bg-white"
                    placeholder="Search instructors..." [(ngModel)]="searchTerm">
                <i class="bi bi-search position-absolute top-50 start-0 translate-middle-y ms-3 text-muted"></i>
            </div>

            <!-- Add Instructor Button -->
            <button class="btn btn-primary rounded-pill px-4 fw-bold shadow-sm d-flex align-items-center"
                (click)="openAddModal()">
                <i class="bi bi-person-plus-fill me-2"></i>
                Add Instructor
            </button>
        </div>
    </div>

    <div *ngIf="loading" class="text-center mt-5">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <!-- Instructors Grid -->
    <div *ngIf="!loading" class="instructors-grid">
        <div class="row g-4">
            <!-- Instructor Card -->
            <div class="col-12 col-sm-6 col-md-4 col-lg-3" *ngFor="let instructor of filteredInstructors">
                <div class="instructor-card card border-0 shadow-sm h-100">
                    <div class="card-body text-center">
                        <!-- Instructor Avatar -->
                        <div class="instructor-avatar-wrapper mb-3">
                            <div class="instructor-avatar" *ngIf="!instructor.cover">
                                {{instructor.name?.charAt(0) || 'I'}}
                            </div>
                            <img *ngIf="instructor.cover" [src]="instructor.cover" alt="{{instructor.name}}" class="instructor-avatar-img">
                            <!-- Status Badge -->
                            <span class="status-badge badge bg-success rounded-pill position-absolute">
                                <i class="bi bi-check-circle-fill me-1"></i>Active
                            </span>
                        </div>

                        <!-- Instructor Info -->
                        <div class="instructor-info">
                            <h5 class="card-title mb-1 fw-bold">{{instructor.name}}</h5>
                            <p class="text-muted small mb-2">
                                <i class="bi bi-envelope me-1"></i>{{instructor.email}}
                            </p>
                            <p class="text-muted small mb-2">
                                <i class="bi bi-briefcase me-1"></i>{{instructor.specialization || 'General'}}
                            </p>
                            <p class="text-primary small mb-3 fw-semibold">
                                <i class="bi bi-book me-1"></i>{{instructor.coursesCount || 0}} Course{{instructor.coursesCount !== 1 ? 's' : ''}}
                            </p>
                        </div>

                        <!-- Action Buttons -->
                        <div class="action-buttons d-flex gap-2 justify-content-center">
                            <button class="btn btn-sm btn-outline-primary flex-fill"
                                (click)="onEdit(instructor.id || instructor._id || instructor.userId)"
                                [disabled]="!instructor.id && !instructor._id && !instructor.userId"
                                title="Edit Instructor">
                                <i class="bi bi-pencil me-1"></i>Edit
                            </button>
                            <button class="btn btn-sm btn-outline-danger flex-fill"
                                (click)="onDelete(instructor.id || instructor._id || instructor.userId)"
                                [disabled]="!instructor.id && !instructor._id && !instructor.userId"
                                title="Delete Instructor">
                                <i class="bi bi-trash me-1"></i>Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- No Instructors Found -->
            <div class="col-12" *ngIf="filteredInstructors.length === 0">
                <div class="text-center py-5">
                    <i class="bi bi-search display-1 text-secondary opacity-25 mb-3"></i>
                    <h5 class="text-muted">No instructors match your search</h5>
                    <p class="text-muted small">Try adjusting your search criteria</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Instructor Modal -->
    <app-edit-user-modal [isOpen]="showEditModal" [userId]="editingInstructorId" (close)="onEditModalClose()"
        (userUpdated)="onInstructorUpdated()">
    </app-edit-user-modal>

    <!-- Add Instructor Modal -->
    <app-add-user-modal [isOpen]="showAddModal" (close)="closeAddModal()" (userAdded)="onInstructorAdded($event)">
    </app-add-user-modal>

    <!-- Confirm Dialog -->
    <app-confirm-modal [isOpen]="showModal" [title]="modalTitle" [message]="modalMessage" (confirm)="confirmDelete()"
        (cancel)="cancelDelete()">
    </app-confirm-modal>
    </div>
</div>